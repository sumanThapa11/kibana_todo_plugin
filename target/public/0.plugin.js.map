{"version":3,"file":"0.plugin.js","sources":["/plugin:testPlugin/plugins/test_plugin/public/application.tsx","/plugin:testPlugin/plugins/test_plugin/public/components/ToDo.tsx","/plugin:testPlugin/plugins/test_plugin/public/components/ToDoList.tsx","/plugin:testPlugin/plugins/test_plugin/public/components/app.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { TestPluginApp } from './components/app';\nexport const renderApp = ({\n  notifications,\n  http\n}, {\n  navigation\n}, {\n  appBasePath,\n  element\n}) => {\n  ReactDOM.render( /*#__PURE__*/React.createElement(TestPluginApp, {\n    basename: appBasePath,\n    notifications: notifications,\n    http: http,\n    navigation: navigation\n  }), element);\n  return () => ReactDOM.unmountComponentAtNode(element);\n};","import { EuiButtonIcon, EuiFlexGroup, EuiFlexItem, EuiHorizontalRule } from '@elastic/eui';\nimport React from \"react\";\nimport '../index.scss';\nimport { URL } from './app'; // const URL = 'http://localhost:3000/api';\n// const URL = 'http://localhost:5601/bzd/api/test_plugin'\n\nconst ToDo = ({\n  text,\n  todo,\n  todos,\n  setTodos\n}) => {\n  const deleteHandler = async () => {\n    await fetch(`${URL}/todo/${todo.id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'kbn-xsrf': 'true'\n      }\n    });\n    setTodos(todos.filter(el => el.id !== todo.id));\n  };\n\n  const completeHandler = async () => {\n    const result = await fetch(`${URL}/todo/${todo.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'kbn-xsrf': 'true'\n      },\n      body: JSON.stringify({\n        completed: !todo.completed\n      })\n    });\n    setTodos(todos.map(item => {\n      if (item.id === todo.id) {\n        return { ...item,\n          completed: !item.completed\n        };\n      }\n\n      return item;\n    })); // console.log(todos);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(EuiFlexGroup, {\n    responsive: false,\n    gutterSize: \"m\",\n    alignItems: \"center\",\n    justifyContent: \"spaceBetween\"\n  }, /*#__PURE__*/React.createElement(EuiFlexItem, {\n    grow: 4\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: `${todo.completed ? \"completed\" : \"\"}`\n  }, /*#__PURE__*/React.createElement(\"h3\", null, text))), /*#__PURE__*/React.createElement(EuiFlexItem, {\n    grow: 1\n  }, /*#__PURE__*/React.createElement(EuiButtonIcon, {\n    display: \"fill\",\n    iconType: \"check\",\n    \"aria-label\": \"done\",\n    color: \"primary\",\n    size: \"m\",\n    onClick: completeHandler\n  })), /*#__PURE__*/React.createElement(EuiFlexItem, {\n    grow: 1\n  }, /*#__PURE__*/React.createElement(EuiButtonIcon, {\n    display: \"fill\",\n    iconType: \"trash\",\n    \"aria-label\": \"Delete\",\n    color: \"danger\",\n    size: \"m\",\n    onClick: deleteHandler\n  }))), /*#__PURE__*/React.createElement(EuiHorizontalRule, null));\n};\n\nexport default ToDo;","import React from \"react\";\nimport ToDo from \"./ToDo\";\n\nconst ToDoList = ({\n  todos,\n  setTodos,\n  filteredTodos\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"ul\", null, filteredTodos.map(todo => /*#__PURE__*/React.createElement(ToDo, {\n    todo: todo,\n    todos: todos,\n    setTodos: setTodos,\n    key: todo.id,\n    text: todo.text\n  }))));\n};\n\nexport default ToDoList;","/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { I18nProvider } from '@kbn/i18n/react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { EuiHorizontalRule, EuiPage, EuiPageBody, EuiPageContent, EuiPageContentBody, EuiPageHeader, EuiTitle, EuiText, EuiFieldText, EuiSelect, EuiFlexGroup, EuiFlexItem, EuiButtonIcon } from '@elastic/eui';\nimport ToDoList from './ToDoList';\nexport const URL = 'http://localhost:5601/hom/api/test_plugin';\nexport const TestPluginApp = ({\n  basename,\n  notifications,\n  http,\n  navigation\n}) => {\n  // Use React hooks to manage state.\n  // const [timestamp, setTimestamp] = useState<string | undefined>();\n  // const URL = 'http://localhost:3000/api';\n  // const URL = 'http://localhost:5601/bzd/api/test_plugin'\n  const [inputText, setInputText] = useState('');\n  const [todos, setTodos] = useState([]);\n  const [status, setStatus] = useState('all');\n  const [filteredTodos, setFilteredTodos] = useState([]);\n  useEffect(() => {\n    async function fetchToDos() {\n      let response = await fetch(`${URL}/todos`);\n      response = await response.json();\n      console.log(response);\n      setTodos(response);\n    }\n\n    fetchToDos();\n  }, []);\n  useEffect(() => {\n    filterHandler();\n  }, [todos, status]);\n\n  const filterHandler = () => {\n    switch (status) {\n      case 'completed':\n        setFilteredTodos(todos.filter(todo => todo.completed === true));\n        break;\n\n      case 'uncompleted':\n        setFilteredTodos(todos.filter(todo => todo.completed === false));\n        break;\n\n      default:\n        setFilteredTodos(todos);\n        break;\n    }\n  };\n\n  const inputTextHandler = e => {\n    // console.log(inputText);\n    setInputText(e.target.value);\n  };\n\n  const submitTodoHandler = async () => {\n    const body = {\n      text: inputText,\n      completed: false,\n      id: parseFloat((Math.random() * 100 + 1).toFixed(3))\n    };\n    const parsedBody = JSON.stringify(body); // console.log(parsedBody);\n    // e.preventDefault();\n\n    const response = await fetch(`${URL}/todos`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'kbn-xsrf': 'true'\n      },\n      body: parsedBody\n    });\n    setTodos([...todos, body]);\n    setInputText(''); // const jsonValue = await response.json();\n\n    console.log(response); // console.log({\"response.json\": jsonValue});\n    // return jsonValue;\n    // console.log(response.json());\n    // setTodos([\n    //   ...todos,\n    //   {text: inputText, completed: false, id: Math.random() * 100}\n    // ]);\n    // console.log(todos);\n  };\n\n  const statusHandler = e => {\n    setStatus(e.target.value);\n  }; // Render the application DOM.\n  // Note that `navigation.ui.TopNavMenu` is a stateful component exported on the `navigation` plugin's start contract.\n\n\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename\n  }, /*#__PURE__*/React.createElement(I18nProvider, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiPage, {\n    restrictWidth: \"800px\"\n  }, /*#__PURE__*/React.createElement(EuiPageBody, null, /*#__PURE__*/React.createElement(EuiPageHeader, null, /*#__PURE__*/React.createElement(EuiTitle, {\n    size: \"l\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"To do App\"))), /*#__PURE__*/React.createElement(EuiPageContent, null, /*#__PURE__*/React.createElement(EuiPageContentBody, null, /*#__PURE__*/React.createElement(EuiFlexGroup, {\n    style: {\n      maxWidth: 500\n    }\n  }, /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiFieldText, {\n    placeholder: \"Add Task\",\n    append: /*#__PURE__*/React.createElement(EuiButtonIcon, {\n      onClick: submitTodoHandler,\n      iconType: \"plusInCircle\",\n      \"aria-label\": \"Add task\"\n    }),\n    value: inputText,\n    onChange: inputTextHandler\n  })), /*#__PURE__*/React.createElement(EuiFlexItem, {\n    grow: false,\n    style: {\n      maxWidth: 150\n    }\n  }, /*#__PURE__*/React.createElement(EuiSelect, {\n    options: [{\n      value: 'all',\n      text: 'All'\n    }, {\n      value: 'completed',\n      text: 'Completed'\n    }, {\n      value: 'uncompleted',\n      text: 'Uncompleted'\n    }],\n    onChange: statusHandler\n  }))), /*#__PURE__*/React.createElement(EuiText, null, /*#__PURE__*/React.createElement(EuiHorizontalRule, null), /*#__PURE__*/React.createElement(ToDoList, {\n    setTodos: setTodos,\n    todos: todos,\n    filteredTodos: filteredTodos\n  })))))))));\n};"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3EA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}